<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="build_files/filelist.xml">
<link rel=Edit-Time-Data href="build_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Service Build Instructions</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Accucode</o:Author>
  <o:LastAuthor>Accucode</o:LastAuthor>
  <o:Revision>3</o:Revision>
  <o:TotalTime>3</o:TotalTime>
  <o:Created>2009-05-14T00:48:00Z</o:Created>
  <o:LastSaved>2009-05-15T02:35:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>565</o:Words>
  <o:Characters>3223</o:Characters>
  <o:Company>Accucode</o:Company>
  <o:Lines>26</o:Lines>
  <o:Paragraphs>7</o:Paragraphs>
  <o:CharactersWithSpaces>3781</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:FormsDesign/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:253367177;
	mso-list-template-ids:992387712;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l0:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1
	{mso-list-id:507016608;
	mso-list-template-ids:2118562760;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l2
	{mso-list-id:1097285110;
	mso-list-template-ids:-1381856752;}
@list l3
	{mso-list-id:1134062169;
	mso-list-template-ids:1246384884;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l4
	{mso-list-id:1214193478;
	mso-list-template-ids:-130241306;}
@list l4:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5
	{mso-list-id:1525166334;
	mso-list-template-ids:-2122128484;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l5:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l5:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<h1>Create the Build</h1>

<table class=MsoNormalTable border=1 cellpadding=0 style='mso-cellspacing:1.5pt;
 mso-padding-alt:0in 5.4pt 0in 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Step<o:p></o:p></b></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description<o:p></o:p></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>1. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Check out the correct code</b> </p>
  <p>The correct code may be HEAD or it may be a branch. Ensure that you have
  the correct code before you begin. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>2. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Ensure migrate scripts exist</b> </p>
  <p>Take a look in service/resource/db/migrate and check the migrateData.txt
  migration script. If it exists and has something in it, you will need to
  perform a migration. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>3. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Update all the version information in MyConstantsIF</b>
  </p>
  <p>The following fields need to be updated:</p>
  <ul type=disc>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l0 level1 lfo3;tab-stops:list .5in'>MyConstantsIF.APPLICATION_VERSION
       </li>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l0 level1 lfo3;tab-stops:list .5in'>MyConstantsIF.ACCOUNT_SCHEMA_VERSION
       </li>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l0 level1 lfo3;tab-stops:list .5in'>MyConstantsIF.GLOBAL_SCHEMA_VERSION
       </li>
  </ul>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>4. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><strong>Check-in the change</strong></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>5. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Tag the source</b> </p>
  <p>The source must be tagged so that a clean check out can be performed later.
  The build tag should be of the form Build-YYMM-[0-N]-[0-N]. Build-0706-1-4
  for example. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=60 valign=top style='width:45.0pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>6. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Pull the code with the tag</b> </p>
  <p>Using the tag from step 5, do a clean cvs checkout.&nbsp;</p>
  <p>You may need to re-import your local settings after the clean checkout.
  &nbsp;<br>
  e.g.: kmImportSettings &lt;user&gt; </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>7. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Run the deploy ant task</b> </p>
  <p>Running the deploy ant task will compile all the code, create all the
  necessary packages, deploy those packages unpack them. </p>
  <p>For example: ./service/java/bin/linux/kmAnt.sh deployProdFromAccucode </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>8.&nbsp;<INPUT TYPE="checkbox"><INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Login to EACH of the servers that got the deployment</b>
  </p>
  <p>You will need to log in to the server to which the deployment was sent.</p>
  <ul type=disc>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l5 level1 lfo6;tab-stops:list .5in'>serviceApp01</li>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l5 level1 lfo6;tab-stops:list .5in'>serviceApp02</li>
  </ul>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>9.&nbsp;<INPUT TYPE="checkbox"><INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Optionally, stop the tomcat servers. In most cases it is
  probably ok to migrate the database without stopping the app but the step is
  here for safety. </p>
  <p>sudo /etc/init.d/tomcat stop </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>10.&nbsp;<INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Migrate the databases</b></p>
  <p>You will need to migrate the databases from only the <strong>serviceapp01</strong>
  server if you deployed to multiple application servers because they all use
  the same database. </p>
  <p>Usually, we use the new &quot;Patch&quot; mechanism.<span
  style='mso-spacerun:yes'>&nbsp; </span>The system will automatically detemine
  which patches need to be applied to bring it up to date.</p>
  <p class=MsoNormal>/usr/local/service/bin/jwJava.sh com.app.patch.MyPatcher
  upgradeAll</p>
  <p class=MsoNormal><b style='mso-bidi-font-weight:normal'><o:p>&nbsp;</o:p></b></p>
  <p class=MsoNormal><b style='mso-bidi-font-weight:normal'>-- OR --<o:p></o:p></b></p>
  <p>If necessary the older style migration script can be explicitly run as
  follows.</p>
  <ol start=1 type=1>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l4 level1 lfo9;tab-stops:list .5in'>log in to mysql: mysql
       -uroot -pAccVservice </li>
   <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
       auto;mso-list:l4 level1 lfo9;tab-stops:list .5in'>mysql&gt; source
       /usr/local/service/stage/resource/db/migrate/migrateData.txt </li>
  </ol>
  </td>
 </tr>
 <tr style='mso-yfti-irow:11'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>11.<INPUT TYPE="checkbox"><INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Restart (or start) tomcat</b> </p>
  <p>Bounce <strong>EACH </strong>tomcat server.&nbsp; </p>
  <p>sudo /etc/init.d/tomcat restart (or /etc/init.d/tomcat start)</p>
  <p class=MsoNormal>This will bring down tomcat, create a tar of the currently
  running code, move the new code from staging to live and bring tomcat back
  up. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:12'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>12.<INPUT TYPE="checkbox"><INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Log out of the server(s)</b></p>
  <p>Work on the servers is complete, log out. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:13'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>13. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Clear the migration scripts</b> </p>
  <p>After the databases have been migrated to the current version, the migrate
  scripts no longer apply so all the sql must be removed.</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:14'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>14. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p>As with step 13, after the databases have been migrated, any custom code
  in MyMigrateAccountSchemasUtility and MyMigrateGlobalSchemaUtility should be
  removed as well. Specifically from the preCustomJavaMigrationCode and
  postCustomJavaMigrationCode methods. Replace any code with a &quot;//
  noop&quot; comment. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:15;mso-yfti-lastrow:yes'>
  <td width=50 valign=top style='width:37.5pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>15. <INPUT TYPE="checkbox"></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Check-in the empty migration scripts and migration
  utility.</b> </p>
  </td>
 </tr>
</table>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
